{"version":3,"file":"localStore.js","sources":["../../../unoptimized/server/web_modules/svelte/store.js","../../../unoptimized/server/_app/routes/localStore.js"],"sourcesContent":["import { n as noop, d as safe_not_equal } from '../common/index-0030b2a9.js';\nexport { b as get } from '../common/index-0030b2a9.js';\n\nconst subscriber_queue = [];\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\n\nexport { writable };\n","import {writable as internal, get} from \"../../web_modules/svelte/store.js\";\nexport function writable(key, initialValue) {\n  const store = internal(initialValue);\n  const {subscribe, set} = store;\n  const json = typeof localStorage !== \"undefined\" ? localStorage.getItem(key) : null;\n  if (json) {\n    set(JSON.parse(json));\n  }\n  function updateStorage(key2, value) {\n    if (typeof localStorage === \"undefined\")\n      return;\n    localStorage.setItem(key2, JSON.stringify(value));\n  }\n  return {\n    set(value) {\n      updateStorage(key, value);\n      set(value);\n    },\n    update(cb) {\n      const value = cb(get(store));\n      updateStorage(key, value);\n      set(value);\n    },\n    subscribe\n  };\n}\n//# sourceMappingURL=localStore.js.map\n"],"names":["subscriber_queue","key","initialValue","store","value","start","noop","stop","subscribers","set","new_value","safe_not_equal","run_queue","length","i","s","push","update","fn","subscribe","run","invalidate","subscriber","index","indexOf","splice","internal","json","localStorage","getItem","updateStorage","key2","setItem","JSON","stringify","parse","[object Object]","cb","get"],"mappings":"8EAGA,MAAMA,EAAmB,oBCFlB,SAAkBC,EAAKC,GAC5B,MAAMC,EDOR,SAAkBC,EAAOC,EAAQC,QAC7B,IAAIC,EACJ,MAAMC,EAAc,GACpB,SAASC,EAAIC,GACT,GAAIC,iBAAeP,EAAOM,KACtBN,EAAQM,EACJH,GAAM,CACN,MAAMK,GAAaZ,EAAiBa,OACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAYK,OAAQC,GAAK,EAAG,CAC5C,MAAMC,EAAIP,EAAYM,GACtBC,EAAE,KACFf,EAAiBgB,KAAKD,EAAGX,GAE7B,GAAIQ,EAAW,CACX,IAAK,IAAIE,EAAI,EAAGA,EAAId,EAAiBa,OAAQC,GAAK,EAC9Cd,EAAiBc,GAAG,GAAGd,EAAiBc,EAAI,IAEhDd,EAAiBa,OAAS,IA0B1C,MAAO,CAAEJ,IAAAA,EAAKQ,OArBd,SAAgBC,GACZT,EAAIS,EAAGd,KAoBWe,UAlBtB,SAAmBC,EAAKC,EAAaf,QACjC,MAAMgB,EAAa,CAACF,EAAKC,GAMzB,OALAb,EAAYQ,KAAKM,GACU,IAAvBd,EAAYK,SACZN,EAAOF,EAAMI,IAAQH,QAEzBc,EAAIhB,GACG,KACH,MAAMmB,EAAQf,EAAYgB,QAAQF,IACnB,IAAXC,GACAf,EAAYiB,OAAOF,EAAO,GAEH,IAAvBf,EAAYK,SACZN,IACAA,EAAO,SC9CPmB,CAASxB,IACjBiB,UAACA,EAASV,IAAEA,GAAON,EACnBwB,EAA+B,oBAAjBC,aAA+BA,aAAaC,QAAQ5B,GAAO,KAI/E,SAAS6B,EAAcC,EAAM3B,GACC,oBAAjBwB,cAEXA,aAAaI,QAAQD,EAAME,KAAKC,UAAU9B,IAE5C,OARIuB,GACFlB,EAAIwB,KAAKE,MAAMR,IAOV,CACLS,IAAIhC,GACF0B,EAAc7B,EAAKG,GACnBK,EAAIL,IAENgC,OAAOC,GACL,MAAMjC,EAAQiC,EAAGC,kBAAInC,IACrB2B,EAAc7B,EAAKG,GACnBK,EAAIL,IAENe,UAAAA"}